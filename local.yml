---
- hosts: localhost
  tasks:
    - name: install packages
      become: true
      become_user: root
      dnf:
        state: present
        name: 
         - dconf-editor
         - gimp

    - name: Echo "Hello World"
      command: echo "Hello World"

    - name: remove openoffice
      become: true
      become_user: root 
      dnf:
        state: absent
        name: 
         - openoffice
         - espeak
         - qemu

  - name: add I17admin
    user:
      name: I17admin
      system: yes
  
  - name: set up sudo for I17admin
    copy:
      src: files/sudoer_I17admin
      dest: /etc/sudoers.d/I17admin
      owner: root
      group: root
      mode: 0440
  
  - name: add updater-ansible pull cron job
    cron:
      name: ansible auto-update
      user: I17admin
      minute: "*90"
      job: ansible-pull -o -U https://github.com/JohannesLbck/I17AnsiblePCLab.git
